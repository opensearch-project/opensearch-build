   release-data-prepper-all-artifacts.run()
      release-data-prepper-all-artifacts.modernSCM({$class=GitSCMSource, remote=https://github.com/opensearch-project/opensearch-build-libraries.git})
      release-data-prepper-all-artifacts.library({identifier=jenkins@1.0.0, retriever=null})
      release-data-prepper-all-artifacts.pipeline(groovy.lang.Closure)
         release-data-prepper-all-artifacts.credentials(jenkins-data-prepper-artifact-staging-site)
         release-data-prepper-all-artifacts.credentials(jenkins-data-prepper-staging-container-repository)
         release-data-prepper-all-artifacts.credentials(jenkins-artifact-promotion-role)
         release-data-prepper-all-artifacts.credentials(jenkins-aws-production-account)
         release-data-prepper-all-artifacts.credentials(jenkins-artifact-production-bucket-name)
         release-data-prepper-all-artifacts.timeout({time=1, unit=HOURS})
         release-data-prepper-all-artifacts.echo(Executing on agent [label:none])
         release-data-prepper-all-artifacts.stage(Download Archives, groovy.lang.Closure)
            release-data-prepper-all-artifacts.script(groovy.lang.Closure)
               release-data-prepper-all-artifacts.dir(archive, groovy.lang.Closure)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/archive/opensearch-data-prepper-0.22.1-linux-x64.tar.gz -o opensearch-data-prepper-0.22.1-linux-x64.tar.gz)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/archive/opensearch-data-prepper-jdk-0.22.1-linux-x64.tar.gz -o opensearch-data-prepper-jdk-0.22.1-linux-x64.tar.gz)
         release-data-prepper-all-artifacts.stage(Sign Archives, groovy.lang.Closure)
            release-data-prepper-all-artifacts.script(groovy.lang.Closure)
               release-data-prepper-all-artifacts.signArtifacts({artifactPath=/tmp/workspace/archive, sigtype=.sig, platform=linux})
                  signArtifacts.echo(PGP or Windows Signature Signing)
                  signArtifacts.fileExists(/tmp/workspace/sign.sh)
                  signArtifacts.git({url=https://github.com/opensearch-project/opensearch-build.git, branch=main})
                  signArtifacts.sh(curl -sSL https://artifacts.opensearch.org/publickeys/opensearch.pgp | gpg --import -)
                  signArtifacts.usernamePassword({credentialsId=github_bot_token_name, usernameVariable=GITHUB_USER, passwordVariable=GITHUB_TOKEN})
                  signArtifacts.string({credentialsId=jenkins-signer-client-role, variable=SIGNER_CLIENT_ROLE})
                  signArtifacts.string({credentialsId=jenkins-signer-client-external-id, variable=SIGNER_CLIENT_EXTERNAL_ID})
                  signArtifacts.string({credentialsId=jenkins-signer-client-unsigned-bucket, variable=SIGNER_CLIENT_UNSIGNED_BUCKET})
                  signArtifacts.string({credentialsId=jenkins-signer-client-signed-bucket, variable=SIGNER_CLIENT_SIGNED_BUCKET})
                  signArtifacts.withCredentials([[GITHUB_USER, GITHUB_TOKEN], SIGNER_CLIENT_ROLE, SIGNER_CLIENT_EXTERNAL_ID, SIGNER_CLIENT_UNSIGNED_BUCKET, SIGNER_CLIENT_SIGNED_BUCKET], groovy.lang.Closure)
                     signArtifacts.sh(
                   #!/bin/bash
                   set +x
                   export ROLE=SIGNER_CLIENT_ROLE
                   export EXTERNAL_ID=SIGNER_CLIENT_EXTERNAL_ID
                   export UNSIGNED_BUCKET=SIGNER_CLIENT_UNSIGNED_BUCKET
                   export SIGNED_BUCKET=SIGNER_CLIENT_SIGNED_BUCKET

                   /tmp/workspace/sign.sh /tmp/workspace/archive --sigtype=.sig --platform=linux
               )
         release-data-prepper-all-artifacts.stage(Release Archives to Production Distribution Bucket, groovy.lang.Closure)
            release-data-prepper-all-artifacts.script(groovy.lang.Closure)
               release-data-prepper-all-artifacts.withAWS({role=production-role-name, roleAccount=aws-account-artifact, duration=900, roleSessionName=jenkins-session}, groovy.lang.Closure)
                  release-data-prepper-all-artifacts.s3Upload({file=archive/, bucket=production-s3-bucket-name, path=data-prepper/0.22.1/})
         release-data-prepper-all-artifacts.script(groovy.lang.Closure)
            release-data-prepper-all-artifacts.postCleanup()
               postCleanup.cleanWs({disableDeferredWipeout=true, deleteDirs=true})
         release-data-prepper-all-artifacts.stage(Copy Docker Image to DockerHub, groovy.lang.Closure)
            release-data-prepper-all-artifacts.script(groovy.lang.Closure)
               release-data-prepper-all-artifacts.string({name=SOURCE_IMAGE_REGISTRY, value=http://public.ecr.aws/data-prepper-container-repository})
               release-data-prepper-all-artifacts.string({name=SOURCE_IMAGE, value=data-prepper:0.22.1-997908})
               release-data-prepper-all-artifacts.string({name=DESTINATION_IMAGE_REGISTRY, value=opensearchproject})
               release-data-prepper-all-artifacts.string({name=DESTINATION_IMAGE, value=data-prepper:0.22.1})
               release-data-prepper-all-artifacts.build({job=docker-copy, parameters=[null, null, null, null]})
         release-data-prepper-all-artifacts.stage(Copy Docker Image to ECR, groovy.lang.Closure)
            release-data-prepper-all-artifacts.script(groovy.lang.Closure)
               release-data-prepper-all-artifacts.string({name=SOURCE_IMAGE_REGISTRY, value=http://public.ecr.aws/data-prepper-container-repository})
               release-data-prepper-all-artifacts.string({name=SOURCE_IMAGE, value=data-prepper:0.22.1-997908})
               release-data-prepper-all-artifacts.string({name=DESTINATION_IMAGE_REGISTRY, value=public.ecr.aws/opensearchproject})
               release-data-prepper-all-artifacts.string({name=DESTINATION_IMAGE, value=data-prepper:0.22.1})
               release-data-prepper-all-artifacts.build({job=docker-copy, parameters=[null, null, null, null]})
         release-data-prepper-all-artifacts.script(groovy.lang.Closure)
            release-data-prepper-all-artifacts.postCleanup()
               postCleanup.cleanWs({disableDeferredWipeout=true, deleteDirs=true})
         release-data-prepper-all-artifacts.stage(Download Maven Artifacts, groovy.lang.Closure)
            release-data-prepper-all-artifacts.script(groovy.lang.Closure)
               release-data-prepper-all-artifacts.dir(maven, groovy.lang.Closure)
                  release-data-prepper-all-artifacts.sh(mkdir -p org/opensearch/dataprepper/data-prepper-api/0.22.1)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar.md5 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar.md5)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar.sha1 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar.sha1)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar.sha256 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar.sha256)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar.sha512 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-javadoc.jar.sha512)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar.md5 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar.md5)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar.sha1 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar.sha1)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar.sha256 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar.sha256)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar.sha512 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.jar.sha512)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom.md5 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom.md5)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom.sha1 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom.sha1)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom.sha256 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom.sha256)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom.sha512 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.pom.sha512)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar.md5 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar.md5)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar.sha1 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar.sha1)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar.sha256 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar.sha256)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar.sha512 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1-sources.jar.sha512)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module.md5 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module.md5)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module.sha1 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module.sha1)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module.sha256 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module.sha256)
                  release-data-prepper-all-artifacts.sh(curl -sSL http://staging-artifacts.cloudfront.net/0.22.1/997908/maven/org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module.sha512 -o org/opensearch/dataprepper/data-prepper-api/0.22.1/data-prepper-api-0.22.1.module.sha512)
         release-data-prepper-all-artifacts.stage(Sign Maven Artifacts, groovy.lang.Closure)
            release-data-prepper-all-artifacts.script(groovy.lang.Closure)
               release-data-prepper-all-artifacts.signArtifacts({artifactPath=/tmp/workspace/maven, type=maven, platform=linux})
                  signArtifacts.echo(PGP or Windows Signature Signing)
                  signArtifacts.fileExists(/tmp/workspace/sign.sh)
                  signArtifacts.git({url=https://github.com/opensearch-project/opensearch-build.git, branch=main})
                  signArtifacts.sh(curl -sSL https://artifacts.opensearch.org/publickeys/opensearch.pgp | gpg --import -)
                  signArtifacts.usernamePassword({credentialsId=github_bot_token_name, usernameVariable=GITHUB_USER, passwordVariable=GITHUB_TOKEN})
                  signArtifacts.string({credentialsId=jenkins-signer-client-role, variable=SIGNER_CLIENT_ROLE})
                  signArtifacts.string({credentialsId=jenkins-signer-client-external-id, variable=SIGNER_CLIENT_EXTERNAL_ID})
                  signArtifacts.string({credentialsId=jenkins-signer-client-unsigned-bucket, variable=SIGNER_CLIENT_UNSIGNED_BUCKET})
                  signArtifacts.string({credentialsId=jenkins-signer-client-signed-bucket, variable=SIGNER_CLIENT_SIGNED_BUCKET})
                  signArtifacts.withCredentials([[GITHUB_USER, GITHUB_TOKEN], SIGNER_CLIENT_ROLE, SIGNER_CLIENT_EXTERNAL_ID, SIGNER_CLIENT_UNSIGNED_BUCKET, SIGNER_CLIENT_SIGNED_BUCKET], groovy.lang.Closure)
                     signArtifacts.sh(
                   #!/bin/bash
                   set +x
                   export ROLE=SIGNER_CLIENT_ROLE
                   export EXTERNAL_ID=SIGNER_CLIENT_EXTERNAL_ID
                   export UNSIGNED_BUCKET=SIGNER_CLIENT_UNSIGNED_BUCKET
                   export SIGNED_BUCKET=SIGNER_CLIENT_SIGNED_BUCKET

                   /tmp/workspace/sign.sh /tmp/workspace/maven --type=maven --platform=linux
               )
         release-data-prepper-all-artifacts.stage(Upload Artifacts to Sonatype, groovy.lang.Closure)
            release-data-prepper-all-artifacts.script(groovy.lang.Closure)
               release-data-prepper-all-artifacts.usernamePassword({credentialsId=jenkins-sonatype-creds, usernameVariable=SONATYPE_USERNAME, passwordVariable=SONATYPE_PASSWORD})
               release-data-prepper-all-artifacts.withCredentials([[SONATYPE_USERNAME, SONATYPE_PASSWORD]], groovy.lang.Closure)
                  release-data-prepper-all-artifacts.sh(/tmp/workspace/publish/stage-maven-release.sh /tmp/workspace/maven)
         release-data-prepper-all-artifacts.script(groovy.lang.Closure)
            release-data-prepper-all-artifacts.postCleanup()
               postCleanup.cleanWs({disableDeferredWipeout=true, deleteDirs=true})
