   packer-build.run()
      packer-build.modernSCM({$class=GitSCMSource, remote=https://github.com/opensearch-project/opensearch-build-libraries.git})
      packer-build.library({identifier=jenkins@2.2.0, retriever=null})
      packer-build.pipeline(groovy.lang.Closure)
         packer-build.timeout({time=4, unit=HOURS})
         packer-build.echo(Executing on agent [docker:[alwaysPull:true, args:, containerPerStageRoot:false, label:Jenkins-Agent-Ubuntu2004-X64-M52xlarge-Docker-Builder, image:opensearchstaging/ci-runner:ubuntu2004-x64-docker-buildx0.9.1-qemu5.0-v1, reuseNode:false, registryUrl:https://public.ecr.aws/, stages:[:]]])
         packer-build.stage(Parameters Check, groovy.lang.Closure)
            packer-build.script(groovy.lang.Closure)
         packer-build.stage(packer-build, groovy.lang.Closure)
            packer-build.script(groovy.lang.Closure)
               packer-build.checkout({$class=GitSCM, branches=[{name=main}], userRemoteConfigs=[{url=https://github.com/opensearch-project/opensearch-ci}]})
               packer-build.readJSON({file=./packer/jenkins-agent-al2-arm64.json})
               packer-build.string({credentialsId=jenkins-agent-vpc-id, variable=vpc_id})
               packer-build.string({credentialsId=jenkins-agent-subnet-id, variable=subnet_id})
               packer-build.string({credentialsId=jenkins-agent-sg-id, variable=sg_id})
               packer-build.withCredentials([vpc_id, subnet_id, sg_id], groovy.lang.Closure)
               packer-build.writeJSON({file=./packer/substitute_jenkins-agent-al2-arm64.json, json={variables={name-base=Jenkins-Agent-AL2-X64, os-version=AL2, build-region=us-east-1, build-vpc=vpc_id, build-subnet=subnet_id, build-secgrp=sg_id, build-time={{isotime "2006-01-02T03-04-05Z"}}, aws_ami_region=us-east-1}}, pretty=2})
               packer-build.string({credentialsId=jenkins-aws-account-public, variable=AWS_ACCOUNT_PUBLIC})
               packer-build.withCredentials([AWS_ACCOUNT_PUBLIC], groovy.lang.Closure)
                  packer-build.withAWS({role=opensearch-packer, roleAccount=AWS_ACCOUNT_PUBLIC, duration=3600, roleSessionName=jenkins-session, useNode=true}, groovy.lang.Closure)
                     packer-build.sh(cd packer && packer build -color=false substitute_jenkins-agent-al2-arm64.json)
         packer-build.script(groovy.lang.Closure)
            packer-build.postCleanup()
               postCleanup.cleanWs({disableDeferredWipeout=true, deleteDirs=true})
